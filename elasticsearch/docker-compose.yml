version: '3.5'


services:
  node1:
    environment:
      - 'cluster.name=playground-elasticsearch'
      - 'bootstrap.memory_lock=false'
      - 'ES_JAVA_OPTS=-Xms512m -Xmx512m'
    hostname: node1
    image: docker.elastic.co/elasticsearch/elasticsearch:6.3.2
    volumes:
      - './data/node1:/usr/share/elasticsearch/data'

  node2:
    environment:
      - 'cluster.name=playground-elasticsearch'
      - 'bootstrap.memory_lock=false'
      - 'ES_JAVA_OPTS=-Xms512m -Xmx512m'
      - 'discovery.zen.ping.unicast.hosts=node1'
    hostname: node2
    image: docker.elastic.co/elasticsearch/elasticsearch:6.3.2
    volumes:
      - './data/node2:/usr/share/elasticsearch/data'

  node3:
    environment:
      - 'cluster.name=playground-elasticsearch'
      - 'bootstrap.memory_lock=false'
      - 'ES_JAVA_OPTS=-Xms512m -Xmx512m'
      - 'discovery.zen.ping.unicast.hosts=node1'
    hostname: node3
    image: docker.elastic.co/elasticsearch/elasticsearch:6.3.2
    volumes:
      - './data/node3:/usr/share/elasticsearch/data'


networks:
  default:
    name: 'playgrounds_elasticsearch'
    ipam:
      config:
        - subnet: 172.70.0.0/24
